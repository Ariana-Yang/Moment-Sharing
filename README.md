# Moment-Sharing

## 项目概述与目的

Moment-Sharing是一个基于React 18 + Vite（TypeScript）开发的私人照片相册应用，专注于为用户提供安全、便捷的照片存储和分享体验。该应用采用零后端架构，所有数据均存储在浏览器的IndexedDB中，确保用户数据的隐私和安全。

项目旨在解决用户在分享生活瞬间时面临的隐私担忧，同时提供流畅的照片管理和查看体验。用户可以轻松上传、组织和查看照片，添加日期和备注，创建珍贵的生活记忆。

## 关键特性与功能

### 核心功能
- **照片上传与压缩**：支持多张照片上传，自动将照片压缩至1MB以下，优化存储和加载速度
- **记忆创建**：为照片添加日期和备注，创建完整的生活记忆
- **时间轴展示**：按时间顺序展示所有记忆，支持快速浏览
- **密码保护**：提供密码设置和验证功能，保护隐私数据
- **编辑与删除**：支持修改和删除已创建的记忆
- **图片查看器**：支持大图查看、缩放、旋转和下载功能
- **跨日期导航**：支持在大图模式下浏览所有照片

### 技术特性
- **零后端架构**：所有数据存储在浏览器IndexedDB中，无需服务器
- **高效图片存储**：使用Blob格式存储图片，优化存储空间和加载速度
- **响应式设计**：适配各种屏幕尺寸，提供良好的移动端体验
- **类型安全**：使用TypeScript开发，确保代码质量和可维护性
- **现代化UI**：采用Tailwind CSS构建美观、易用的用户界面

## 安装与设置

### 先决条件
- Node.js 16.x 或更高版本
- npm 或 yarn 包管理器

### 环境配置
1. 克隆项目仓库
   ```bash
   git clone <repository-url>
   cd Moment-Sharing
   ```

2. 安装依赖
   ```bash
   npm install
   ```

3. 开发模式运行
   ```bash
   npm run dev
   ```
   应用将在 http://localhost:5173 启动

4. 构建生产版本
   ```bash
   npm run build
   ```
   构建产物将生成在 `dist` 目录

5. 预览生产版本
   ```bash
   npm run preview
   ```

## 使用指南

### 首次使用
1. 打开应用后，系统会提示设置密码
2. 设置密码后，进入应用主界面
3. 点击右下角的加号按钮，开始创建第一个记忆

### 创建记忆
1. 点击右下角加号按钮
2. 选择照片（支持多张）
3. 填写日期（范围：2020.1.1 - 2029.12.31）
4. 添加备注
5. 点击保存按钮

### 查看与编辑记忆
1. 在时间轴上点击记忆卡片查看详细信息
2. 点击编辑按钮修改记忆内容
3. 可以添加或删除照片，修改日期和备注
4. 点击保存按钮更新记忆

### 图片浏览
1. 点击记忆卡片中的图片进入大图模式
2. 使用鼠标滚轮或按钮进行缩放
3. 点击旋转按钮调整图片方向
4. 点击下载按钮保存图片到本地
5. 使用左右箭头浏览所有照片

### 密码管理
1. 首次使用时设置密码
2. 每次打开应用需要输入密码
3. 支持查看模式和编辑模式切换

## 架构设计

### 组件关系图
```
┌───────────────────────────────────────────────────────────────┐
│                           App                                 │
└───────────────────────────────────────────────────────────────┘
          │            │            │            │            │
          ▼            ▼            ▼            ▼            ▼
┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐
│  Timeline   │ │ AddButton   │ │EditorModal  │ │ImageViewer  │ │PasswordModal│
└─────────────┘ └─────────────┘ └─────────────┘ └─────────────┘ └─────────────┘
          │            │            │            │            │
          └────────────┼────────────┼────────────┼────────────┘
                       │            │            │
                       ▼            ▼            ▼
                ┌─────────────┐ ┌─────────────┐ ┌─────────────┐
                │  useMemories │ │    db.ts    │ │    types    │
                └─────────────┘ └─────────────┘ └─────────────┘
```

### 数据流程图
```
┌────────────────┐     ┌────────────────┐     ┌────────────────┐
│  用户上传图片  │────▶│  图片压缩处理  │────▶│  Blob格式存储  │
└────────────────┘     └────────────────┘     └────────────────┘
                             ▲                        │
                             │                        ▼
┌────────────────┐     ┌────────────────┐     ┌────────────────┐
│  密码验证      │────▶│  编辑记忆内容  │◀────│  IndexedDB      │
└────────────────┘     └────────────────┘     └────────────────┘
```

## 目录结构

```
├── src/                      # 源代码目录
│   ├── components/           # React组件
│   │   ├── AddButton.tsx     # 添加按钮组件
│   │   ├── EditorModal.tsx   # 编辑器模态框
│   │   ├── ImageViewer.tsx   # 图片查看器
│   │   ├── PasswordModal.tsx # 密码模态框
│   │   ├── SettingsModal.tsx # 设置模态框
│   │   └── Timeline.tsx      # 时间轴组件
│   ├── db/                   # 数据库相关
│   │   └── db.ts             # IndexedDB配置和操作
│   ├── hooks/                # 自定义Hooks
│   │   └── useMemories.ts    # 记忆数据管理Hook
│   ├── types/                # 类型定义
│   │   └── index.ts          # 类型声明
│   ├── App.css               # App组件样式
│   ├── App.tsx               # 主应用组件
│   ├── index.css             # 全局样式
│   └── main.tsx              # 应用入口
├── .gitignore                # Git忽略配置
├── index.html                # HTML模板
├── package.json              # 项目配置和依赖
├── postcss.config.js         # PostCSS配置
├── tailwind.config.js        # Tailwind CSS配置
├── tsconfig.json             # TypeScript配置
├── tsconfig.node.json        # Node环境TypeScript配置
└── vite.config.ts            # Vite配置
```

## 贡献指南

我们欢迎社区贡献！如果您想为项目做出贡献，请遵循以下步骤：

1. Fork 项目仓库
2. 创建新的功能分支 (`git checkout -b feature/AmazingFeature`)
3. 提交您的更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 打开 Pull Request

### 开发规范
- 遵循现有的代码风格和命名约定
- 确保所有代码都有适当的类型定义
- 编写清晰的注释
- 确保所有功能都经过测试

## 常见问题与故障排除

### 1. 照片无法正常显示
**问题描述**：上传照片后，预览界面只能显示日期和备注，无法显示照片内容

**解决方案**：
- 检查浏览器是否支持Blob URL
- 清除浏览器缓存，刷新页面
- 检查控制台是否有错误信息

### 2. 密码模态框无法关闭
**问题描述**：输入密码后，密码模态框无法关闭

**解决方案**：
- 确保输入的密码正确
- 检查浏览器控制台是否有错误信息
- 刷新页面重新尝试

### 3. 图片查看器功能异常
**问题描述**：图片查看器无法正常缩放或切换图片

**解决方案**：
- 确保浏览器支持CSS transform属性
- 检查控制台是否有JavaScript错误
- 尝试使用最新版本的Chrome或Firefox浏览器

### 4. 应用性能问题
**问题描述**：上传大量照片后，应用运行缓慢

**解决方案**：
- 关闭其他浏览器标签页，释放内存
- 清除浏览器缓存
- 考虑删除一些旧的记忆，减少数据量

## 许可证信息

本项目采用 MIT 许可证。详情请查看 [LICENSE](LICENSE) 文件。

## 联系信息

### 项目维护者
- 姓名：[Your Name]
- 邮箱：[your-email@example.com]
- GitHub：[Your GitHub Profile]

### 反馈与建议
如果您有任何反馈或建议，欢迎通过以下方式联系我们：
- 提交 GitHub Issue：[GitHub Issues]
- 发送邮件：[your-email@example.com]

## 后续开发计划

1. **多用户支持**：添加多用户系统，支持不同用户拥有独立相册
2. **后端集成**：引入Nest.js后端，支持数据同步和备份
3. **多平台支持**：开发React Native版本，支持移动端使用
4. **实时同步**：添加WebSocket支持，实现多设备数据同步
5. **云存储集成**：支持将照片备份到云端存储服务
6. **协作功能**：支持与好友共享特定相册或照片

## 更新日志

### v1.0.0 (2026-01-04)
- 初始版本发布
- 实现核心功能：照片上传、记忆创建、时间轴展示
- 添加密码保护功能
- 实现图片查看器
- 支持跨日期导航

---

感谢您使用 Moment-Sharing！希望这款应用能为您带来美好的回忆体验。